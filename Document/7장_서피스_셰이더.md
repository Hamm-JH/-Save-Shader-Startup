# 7장 서피스 셰이더

5장, 6장에선 



### [서피스 셰이더는 무엇인가?](#서피스 셰이더는 무엇인가?)

### [서피스 셰이더 편집](#서피스 셰이더 편집)

### [커스텀 라이팅 모델 작성](#커스텀 라이팅 모델 작성)

### [요약](#요약)



## 서피스 셰이더는 무엇인가?

라이팅 모델을 계산하는 특수한 유니티 셰이더 종류중 하나.

7장에선 오직 서피스 셰이더만 사용.

서피스 셰이더 장점 : 상당한 양의 보일러플레이트 코드 감춤

예 : 이전 장에서 멀티 광원 지원한다고 중복 코드 작성해야했음. 이렇게 추가작성을 피함

단점 : 약간의 코드 탄력성 감소

정교한 ForwardBase 패스 컨트롤 위해 언릿 셰이더 사용해야할수 있음.



서피스 셰이더 구조는 언릿 셰이더 구조와 다름.

언릿 셰이더는 두 가지 셰이더 함수(정점, 프레그먼트), 두 가지 데이터 구조체(정점 함수입력, 출력) 사용.

추가로 하나 이상 광원 사용시 ForwardBase, ForwardAdd라는 두 가지 패스 사용해야 했음.



서피스 셰이더에서 정점 함수는 필수가 아님.

두 가지 데이터의 구체적 사용 목적이 다름.

프레그먼트 유지

서피스 함수 작성 필요.

추가로 라이팅 모델 함수 작성할수도 있음.



### 기본 서피스 셰이더

프로젝트 창에서 마우스 우클릭 - Create - Shader - Standard - Surface Shader 선택해 신규 서피스 셰이더 생성한다.

[defaultSurfaceShader / 기본 서피스 셰이더 예시]



### Pragmas

### 신규 데이터 구조체

### 서피스 함수

### 라이팅 모델이란?

### 서피스 셰이더의 데이터 흐름



## 서피스 셰이더 편집

서피스 셰이더가 무엇인지, 어떠한 장점이 있는지 배웠다. 이제 유니티 표준 라이팅 함수를 사용하는 몇 가지 커스텀 셰이더를 살펴보자. 표준 라이팅 모델은 물리 기반이다.

[SurfaceShaderSecondAlbedo / 두 알베도 텍스처를 선영 보간한 서피스 셰이더]



### 두 번째 알베도 맵 추가하기

### 노멀 맵 추가하기

다른 작업 중 하나는 노멀 맵을 다루는 것이다.

7장 초반에 나왔던 기본 셰이더에 노멀 맵을 추가해보자.

[SurfaceShaderNormalMap / 노멀 맵을 추가한 최종 커스텀 서피스 셰이더]



### 그림자 작동 확인하기

### 다른 내장 라이팅 모델 사용



## 커스텀 라이팅 모델 작성

### 라이팅 모델 함수 시그니처

### SurfaceOutput 데이터 구조체

### 서피스 함수

### 속성 블록

### 커스텀 라이팅 함수



## 요약